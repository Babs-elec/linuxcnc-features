<LinuxCNC-Features>
  <feature src="circular-array.ini" expanded="False" help="&lt;big&gt;Create array of items&lt;/big&gt;&#10;Drag and drop subroutines into Items parameter.&#10;Parameters num, dX, dY, dZ&#10;Modifies defined coordinate system to make offsets! Returns to G54 afterwards!" icon="icons/circular-array.png" image="images/circular-array.png" after="&#10;; angle increment&#10;#&lt;#self_id-ang&gt;  = [#&lt;#self_id-ang&gt; + #full_angle/#param_num]&#10;O&lt;#self_id&gt; END REPEAT&#10;(Restore coordinate system /can be problems with G59.1-3 BE CAREFULL!/)&#10;G[53+#&lt;#self_id-restore-coord&gt;]&#10;(End Circular Array)" order="['param_num', 'param_cx', 'param_cy', 'param_d', 'param_ang', 'param_full_angle', 'param_rotate', 'param_items']" call="" selected="False" path="0" definitions="" before="&#10;(Circular Array)&#10;&lt;eval&gt;self.include_once(&quot;rotate-xy.ngc&quot;)&lt;/eval&gt;&#10;(Get cx,cy in machine coordinates)&#10;#&lt;#self_id-cx&gt; = [#5021 + #param_cx]&#10;#&lt;#self_id-cy&gt; = [#5022 + #param_cy]&#10;#&lt;#self_id-restore-coord&gt; = #5220&#10;(Circular Array)&#10;#&lt;#self_id-ang&gt; = #param_ang&#10;G[#param_coord]&#10;; full id of feature is used to make able array of array's&#10;O&lt;#self_id&gt; REPEAT [#param_0]&#10;G92.1 (disable G92 offsets - they ruin the array after rotating coordinates)&#10;(move and rotate coordinates)&#10;(Get rotated coordinates)&#10;O&lt;rotate-xy&gt; CALL [#&lt;#self_id-cx&gt;+#param_d/2] [0] [#&lt;#self_id-cx&gt;] [#&lt;#self_id-cy&gt;] [#&lt;#self_id-ang&gt;]&#10;#&lt;#self_id-x&gt; = #&lt;_rotate_result_x&gt;&#10;#&lt;#self_id-y&gt; = #&lt;_rotate_result_y&gt;&#10;O&lt;#self_id-if&gt; IF [#param_rotate] (Enable rotations)&#10;G10 L2 P[#param_coord-53]  X#&lt;#self_id-x&gt; Y#&lt;#self_id-y&gt;  R#&lt;#self_id-ang&gt;&#10;O&lt;&lt;eval&gt;self.get_attr(&quot;id&quot;)&lt;/eval&gt;-if&gt; ELSE&#10;G10 L2 P[#param_coord-53]  X#&lt;#self_id-x&gt; Y#&lt;#self_id-y&gt;&#10;O&lt;&lt;eval&gt;self.get_attr(&quot;id&quot;)&lt;/eval&gt;-if&gt; ENDIF&#10;; array body" type="Circular array" id="Circular-array-0002" name="Circular array 0002">
    <param tool_tip="Number of copies" selected="False" name="Number" expanded="False" value="6" call="#param_num" path="0:0" type="int" icon="icons/rect.png"/>
    <param tool_tip="X of array center" selected="False" name="cX" expanded="False" value="0" call="#param_cx" path="0:1" type="float" icon="icons/center.png"/>
    <param tool_tip="Y of array center" selected="False" name="cY" expanded="False" value="0" call="#param_cy" path="0:2" type="float" icon="icons/center.png"/>
    <param tool_tip="Array diameter" selected="False" name="D" expanded="False" value="100" call="#param_d" path="0:3" type="float" icon="icons/diameter.png"/>
    <param tool_tip="Angle for the first array item (0 points to X positive direction)" selected="False" name="Start angle" expanded="False" value="0" call="#param_ang" path="0:4" type="float" icon="icons/angle.png"/>
    <param tool_tip="Angle to fill with array" selected="False" name="Full angle" expanded="False" value="360" call="#param_full_angle" path="0:5" type="float" icon="icons/angle.png"/>
    <param tool_tip="Rotate each item (1=Rotate, 0=No)" selected="False" name="Rotate" expanded="False" value="1" call="#param_rotate" path="0:6" type="bool"/>
    <param tool_tip="Drop Subroutines here" selected="False" name="Items" expanded="False" call="#param_items" path="0:7" type="items" icon="icons/items.png"/>
    <param tool_tip="Angle to fill with array" selected="False" name="Coordinate system G" expanded="False" value="57" call="#param_coord" path="0:8" type="string"/>
  </feature>
</LinuxCNC-Features>
