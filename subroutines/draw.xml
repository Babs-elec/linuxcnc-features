<LinuxCNC-Features>
  <feature src="mill/draw/draw.ini" after="&#10;O&lt;milldraw-exec&gt; CALL" help="&lt;big&gt;Draw&lt;/big&gt;" name="Draw 0001" image="images/draw.png" expanded="True" id="Draw-0001" call="" selected="False" definitions="&#10;( Draw definitions )&#10;&#9;;py,import os&#10;&#9;;py,import sys&#10;&#9;;py,()&#10;&#9;;py,sys.path.append(&quot;&lt;eval&gt;os.path.dirname(__file__)&lt;/eval&gt;/subroutines/mill/draw/&quot;)&#10;&#9;;py,from milldraw import *&#10;&#9;;py,milldraw = MillDraw()&#10;&#9;(Parse commands from external python script)&#10;&#9;O&lt;milldraw-exec&gt; SUB&#10;&#9;&#9;#&lt;draw_param_g&gt; = 1&#10;&#9;&#9;;py,log(&quot;start draw&quot;)&#10;&#9;&#9;;py,milldraw.process()&#10;&#9;&#9;O&lt;milldraw-exec-while&gt; WHILE [#&lt;draw_param_g&gt; GT -1]&#10;&#9;&#9;&#9;;py,g,x,y,z,i,j,k = milldraw.get_line()&#10;&#9;&#9;&#9;;py,log(g,x,y,z,i,j,k)&#10;&#9;&#9;&#9;#&lt;draw_param_x&gt;=0&#10;&#9;&#9;&#9;#&lt;draw_param_y&gt;=0&#10;&#9;&#9;&#9;#&lt;draw_param_z&gt;=0&#10;&#9;&#9;&#9;;#&lt;draw_param_g&gt; = [#&lt;draw_param_g&gt;-1]&#10;&#9;&#9;&#9;;py,interpreter.this.params['draw_param_g']=g&#10;&#9;&#9;&#9;;py,interpreter.this.params['draw_param_x']=x&#10;&#9;&#9;&#9;;py,interpreter.this.params['draw_param_y']=y&#10;&#9;&#9;&#9;;py,interpreter.this.params['draw_param_z']=z&#10;&#9;&#9;&#9;O&lt;milldraw-exec-if&gt;     IF [ #&lt;draw_param_g&gt; EQ 130 ] ; G1 XY move&#10;&#9;&#9;&#9;&#9;G01 X#&lt;draw_param_x&gt; Y#&lt;draw_param_y&gt;&#10;&#9;&#9;&#9;O&lt;milldraw-exec-if&gt; ELSEIF [ #&lt;draw_param_g&gt; EQ 140 ] ; G1 Z&#10;&#9;&#9;&#9;&#9;G01 Z#&lt;draw_param_z&gt;&#10;&#9;&#9;&#9;O&lt;milldraw-exec-if&gt; ELSEIF [ #&lt;draw_param_g&gt; EQ 170 ] ; G1 XYZ&#10;&#9;&#9;&#9;&#9;G01 X#&lt;draw_param_x&gt; Y#&lt;draw_param_y&gt; Z#&lt;draw_param_z&gt;&#10;&#10;&#9;&#9;&#9;O&lt;milldraw-exec-if&gt;     IF [ #&lt;draw_param_g&gt; EQ  30 ] ; G0 XY&#10;&#9;&#9;&#9;&#9;G00 X#&lt;draw_param_x&gt; Y#&lt;draw_param_y&gt;&#10;&#9;&#9;&#9;O&lt;milldraw-exec-if&gt; ELSEIF [ #&lt;draw_param_g&gt; EQ  40 ] ; G0 Z&#10;&#9;&#9;&#9;&#9;G00 Z#&lt;draw_param_z&gt;&#10;&#9;&#9;&#9;O&lt;milldraw-exec-if&gt; ELSEIF [ #&lt;draw_param_g&gt; EQ  70 ] ; G0 XYZ&#10;&#9;&#9;&#9;&#9;G00 X#&lt;draw_param_x&gt; Y#&lt;draw_param_y&gt; Z#&lt;draw_param_z&gt;&#10;&#9;&#9;&#9;O&lt;milldraw-exec-if&gt; ELSEIF [ #&lt;draw_param_g&gt; EQ 2 OR #&lt;draw_param_g&gt; EQ 3 ]&#10;&#9;&#9;&#9;&#9;G[#&lt;draw_param_g&gt;] X#&lt;draw_param_x&gt; Y#&lt;draw_param_y&gt; Z#&lt;draw_param_z&gt; I#&lt;draw_param_i&gt; J#&lt;draw_param_j&gt;&#10;&#9;&#9;&#9;O&lt;milldraw-exec-if&gt; ENDIF&#10;&#9;&#9;O&lt;milldraw-exec-while&gt; ENDWHILE&#10;&#9;&#9;;py,log(&quot;end draw&quot;)&#10;&#9;&#9;;py;log()&#10;&#9;O&lt;milldraw-exec&gt; ENDSUB&#10;&#10;( /Draw definitions )" path="0" before="&#10;#&lt;draw_tmp_x&gt; = [#param_x]&#10;#&lt;draw_tmp_y&gt; = [#param_y]&#10;#&lt;_draw_start_x&gt; = [[#param_x]]&#10;#&lt;_draw_start_y&gt; = [[#param_y]]&#10;;py,milldraw.draw_start(interpreter.this.params['draw_tmp_x'],interpreter.this.params['draw_tmp_y'])&#10;#&lt;_draw_x&gt; = [[#param_x]]&#10;#&lt;_draw_y&gt; = [[#param_y]]&#10;" type="Draw" order="['PARAM_X', 'PARAM_Y']" icon="icons/draw.png">
    <param tool_tip="X start" expanded="False" name="X" selected="False" value="0" call="#param_x" path="0:0" type="float" icon=""/>
    <param tool_tip="Y start" expanded="False" name="Y" selected="False" value="0" call="#param_y" path="0:1" type="float" icon=""/>
    <param tool_tip="Drop Draw items here" expanded="True" name="Items" selected="False" call="#param_items" path="0:2" type="items" icon="icons/items.png">
      <feature src="mill/draw/line-abs.ini" expanded="True" help="&lt;big&gt;Line to&lt;/big&gt;" icon="icons/line-to.png" image="images/line-to.png" after="" order="['PARAM_X', 'PARAM_Y']" call="&#10;#&lt;draw_tmp_x&gt; = [#param_x]&#10;#&lt;draw_tmp_y&gt; = [#param_y]&#10;;py,milldraw.line_to(interpreter.this.params['draw_tmp_x'],interpreter.this.params['draw_tmp_y'])&#10;#&lt;_draw_x&gt; = [[#param_x]]&#10;#&lt;_draw_y&gt; = [[#param_y]]&#10;" selected="False" path="0:2:0" definitions="" before="&#10;" type="Line to" id="Line-to-0001" name="Line to 0001">
        <param tool_tip="X" expanded="False" name="X" selected="False" value="10" call="#param_x" path="0:2:0:0" type="float" icon=""/>
        <param tool_tip="Y" expanded="False" name="Y" selected="False" value="10" call="#param_y" path="0:2:0:1" type="float" icon=""/>
      </feature>
      <feature src="mill/draw/line-abs.ini" expanded="True" help="&lt;big&gt;Line to&lt;/big&gt;" icon="icons/line-to.png" image="images/line-to.png" after="" order="['PARAM_X', 'PARAM_Y']" call="&#10;#&lt;draw_tmp_x&gt; = [#param_x]&#10;#&lt;draw_tmp_y&gt; = [#param_y]&#10;;py,milldraw.line_to(interpreter.this.params['draw_tmp_x'],interpreter.this.params['draw_tmp_y'])&#10;#&lt;_draw_x&gt; = [[#param_x]]&#10;#&lt;_draw_y&gt; = [[#param_y]]&#10;" selected="False" path="0:2:1" definitions="" before="&#10;" type="Line to" id="Line-to-0001" name="Line to 0001">
        <param tool_tip="X" expanded="False" name="X" selected="False" value="0" call="#param_x" path="0:2:1:0" type="float" icon=""/>
        <param tool_tip="Y" expanded="False" name="Y" selected="False" value="10" call="#param_y" path="0:2:1:1" type="float" icon=""/>
      </feature>
      <feature src="mill/draw/line-abs.ini" expanded="True" help="&lt;big&gt;Line to&lt;/big&gt;" icon="icons/line-to.png" image="images/line-to.png" after="" order="['PARAM_X', 'PARAM_Y']" call="&#10;#&lt;draw_tmp_x&gt; = [#param_x]&#10;#&lt;draw_tmp_y&gt; = [#param_y]&#10;;py,milldraw.line_to(interpreter.this.params['draw_tmp_x'],interpreter.this.params['draw_tmp_y'])&#10;#&lt;_draw_x&gt; = [[#param_x]]&#10;#&lt;_draw_y&gt; = [[#param_y]]&#10;" selected="False" path="0:2:2" definitions="" before="&#10;" type="Line to" id="Line-to-0001" name="Line to 0001">
        <param tool_tip="X" expanded="False" name="X" selected="False" value="0" call="#param_x" path="0:2:2:0" type="float" icon=""/>
        <param tool_tip="Y" expanded="False" name="Y" selected="True" value="10" call="#param_y" path="0:2:2:1" type="float" icon=""/>
      </feature>
    </param>
  </feature>
</LinuxCNC-Features>
