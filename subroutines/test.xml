<LinuxCNC-Features>
  <feature src="mill/set-tool-params.ini" expanded="True" help="Sets global tool parameters depth step, feed, spindle, final cut and etc." icon="icons/tool-params.png" image="images/tool-params.png" after="" order="['PARAM_D', 'PARAM_DEPTH_STEP', 'PARAM_FEED', 'PARAM_SPINDLE', 'PARAM_PENETRATION_FEED', 'PARAM_PENETRATION_ANGLE', 'PARAM_FINAL', 'PARAM_FINAL_NUM', 'PARAM_FINAL_FEED', 'PARAM_FINAL_SPINDLE']" call="&#10;&#9;#&lt;_global_tool_d&gt;&#9;&#9;&#9;= [#param_d]&#10;&#9;#&lt;_global_depth_step&gt;&#9;&#9;= [#param_depth_step]&#10;&#9;#&lt;_global_feed&gt;&#9;&#9;&#9;&#9;= [#param_feed]&#10;&#9;#&lt;_global_spindle&gt;&#9;&#9;&#9;= [#param_spindle]&#10;&#9;#&lt;_global_final&gt;&#9;&#9;&#9;= [#param_final]&#10;&#9;#&lt;_global_final_num&gt;&#9;&#9;= [#param_final_num]&#10;&#9;#&lt;_global_final_feed&gt;&#9;&#9;= [#param_final_feed]&#10;&#9;#&lt;_global_final_spindle&gt;&#9;= [#param_final_spindle]&#10;&#9;#&lt;_global_penetration_feed&gt;&#9;&#9;= [#param_penetration_feed]&#10;&#9;#&lt;_global_penetration_angle&gt;&#9;= [#param_penetration_angle]&#10;&#10;" selected="False" path="0" definitions="" before="&#10;" type="Set tool params" id="Set-tool-params-0002" name="Set tool params 0002">
    <param tool_tip="diamter" expanded="False" name="Diameter" selected="False" value="10" call="#param_d" path="0:0" type="float" icon="icons/tool-d.png"/>
    <param tool_tip="depth step" expanded="False" name="Depth step" selected="False" value="1" call="#param_depth_step" path="0:1" type="float" icon="icons/tool-depth.png"/>
    <param tool_tip="Feed" expanded="False" name="Feed" selected="False" value="1000" call="#param_feed" path="0:2" type="float" icon="icons/tool-feed.png"/>
    <param tool_tip="Spindle" expanded="False" name="Spindle speed" selected="False" value="800" call="#param_spindle" path="0:3" type="float" icon="icons/tool-spindle.png"/>
    <param tool_tip="Penetration feed" expanded="False" name="Penetration feed" selected="False" value="#&lt;_global_feed&gt;/2" call="#param_penetration_feed" path="0:4" type="float" icon="icons/tool-feed.png"/>
    <param tool_tip="Penetration angle (90 = straight)" expanded="False" name="Penetration angle" selected="False" value="89" call="#param_penetration_angle" path="0:5" type="float" icon="icons/tool-penetration-angle.png"/>
    <param tool_tip="Final cut depth per pass" expanded="False" name="Final cut depth" selected="False" value=".4" call="#param_final" path="0:6" type="float" icon="icons/tool-final-depth.png"/>
    <param tool_tip="Final num of passes" expanded="False" name="Final cut num" selected="False" value="3" call="#param_final_num" path="0:7" type="float" icon="icons/tool-final-num.png"/>
    <param tool_tip="Final cut feed" expanded="False" name="Final cut feed" selected="False" value="100" call="#param_final_feed" path="0:8" type="float" icon="icons/tool-final-feed.png"/>
    <param tool_tip="Final cut spindle speed" expanded="False" name="Final cut spindle" selected="False" value="1000" call="#param_final_spindle" path="0:9" type="float" icon="icons/tool-final-spindle.png"/>
  </feature>
  <feature src="mill/draw/draw.ini" after="&#10;O&lt;milldraw-exec&gt; CALL [[#param_surface]] [[#param_depth]]&#10;;py,milldraw.done()" help="&lt;big&gt;Draw&lt;/big&gt;" name="Draw 0002" image="images/draw.png" expanded="True" id="Draw-0002" call="" selected="False" definitions="&#10;( Draw definitions )&#10;&#9;;py,import os&#10;&#9;;py,import sys&#10;&#9;;py,()&#10;&#9;;py,sys.path.append(&quot;&lt;eval&gt;os.path.dirname(__file__)&lt;/eval&gt;/subroutines/mill/draw/&quot;)&#10;&#9;;py,from milldraw import *&#10;&#9;;py,milldraw = MillDraw()&#10;&#9;(Parse commands from external python script)&#10;&#9;O&lt;milldraw-exec&gt; SUB&#10;&#9;&#9;#&lt;draw_param_g&gt; = 1&#10;&#9;&#9;; // py,log(&quot;start draw&quot;)&#10;&#9;&#9;; Set parameters&#10;&#9;&#9;;py,milldraw.path.process.surface&#9;&#9;&#9;= interpreter.this.params[1]&#10;&#9;&#9;;py,milldraw.path.process.depth&#9;&#9;&#9;&#9;= interpreter.this.params[2]&#10;&#9;&#9;;py,milldraw.path.process.depth_step&#9;&#9;= interpreter.this.params['_global_depth_step']&#10;&#9;&#9;;py,milldraw.path.process.rappid&#9;&#9;&#9;= interpreter.this.params['_global_rappid']&#10;&#9;&#9;;py,milldraw.path.process.feed&#9;&#9;&#9;&#9;= interpreter.this.params['_global_feed']&#10;&#9;&#9;;py,milldraw.path.process.penetration_feed&#9;= interpreter.this.params['_global_penetration_feed']&#10;&#9;&#9;;py,milldraw.path.process.penetration_angle&#9;= interpreter.this.params['_global_penetration_angle']/180*3.1415926535897931&#10;&#9;&#9;;py,milldraw.path.process.spindle&#9;&#9;&#9;= interpreter.this.params['_global_spindle']&#10;&#9;&#9;;py,milldraw.path.process.final&#9;&#9;&#9;&#9;= interpreter.this.params['_global_final']&#10;&#9;&#9;;py,milldraw.path.process.final_num&#9;&#9;&#9;= interpreter.this.params['_global_final_num']&#10;&#9;&#9;;py,milldraw.path.process.final_feed&#9;&#9;= interpreter.this.params['_global_final_feed']&#10;&#9;&#9;;py,milldraw.path.process.final_spindle&#9;&#9;= interpreter.this.params['_global_final_spindle']&#10;&#9;&#9;; Process to get Gcode&#10;&#9;&#9;;py,milldraw.process()&#10;&#9;&#9;;py,interpreter.this.params['lines']=len(milldraw.exp)&#10;&#9;&#9;O&lt;milldraw-exec-repeat&gt; REPEAT [#&lt;lines&gt;]&#10;&#9;&#9;&#9;; Get Gcode in own format (gcode-type, x,y,z,i,j,k,feed)&#10;&#9;&#9;&#9;;py,g,x,y,z,i,j,k,f = milldraw.get_line()&#10;&#9;&#9;&#9;;  py,log(g,x,y,z,i,j,k,f)&#10;&#9;&#9;&#9;;py,interpreter.this.params['draw_param_g']=g&#10;&#9;&#9;&#9;;py,interpreter.this.params['draw_param_x']=float(x) if x != None else 0&#10;&#9;&#9;&#9;;py,interpreter.this.params['draw_param_y']=float(y) if y != None else 0&#10;&#9;&#9;&#9;;py,interpreter.this.params['draw_param_z']=float(z) if z != None else 0&#10;&#9;&#9;&#9;;py,interpreter.this.params['draw_param_i']=float(i) if i != None else 0&#10;&#9;&#9;&#9;;py,interpreter.this.params['draw_param_j']=float(j) if j != None else 0&#10;&#9;&#9;&#9;;py,interpreter.this.params['draw_param_k']=float(k) if k != None else 0&#10;&#9;&#9;&#9;;py,interpreter.this.params['draw_param_f']=float(f) if f != None else -1&#10;&#10;&#9;&#9;&#9;O&lt;milldraw-exec-if-01&gt; IF [#&lt;draw_param_f&gt; GT 0]&#10;&#9;&#9;&#9;&#9;F#&lt;draw_param_f&gt;&#10;&#9;&#9;&#9;O&lt;milldraw-exec-if-01&gt; ENDIF&#10;&#9;&#9;&#9;O&lt;milldraw-exec-if&gt;     IF [ #&lt;draw_param_g&gt; EQ -100 ] ; Set Spindle&#10;&#9;&#9;&#9;&#9;S#&lt;draw_param_x&gt;&#10;&#9;&#9;&#9;O&lt;milldraw-exec-if&gt; ELSEIF [ #&lt;draw_param_g&gt; EQ 130 ] ; G1 XY move&#10;&#9;&#9;&#9;&#9;G01 X#&lt;draw_param_x&gt; Y#&lt;draw_param_y&gt;&#10;&#9;&#9;&#9;O&lt;milldraw-exec-if&gt; ELSEIF [ #&lt;draw_param_g&gt; EQ 140 ] ; G1 Z&#10;&#9;&#9;&#9;&#9;G01 Z#&lt;draw_param_z&gt;&#10;&#9;&#9;&#9;O&lt;milldraw-exec-if&gt; ELSEIF [ #&lt;draw_param_g&gt; EQ 170 ] ; G1 XYZ&#10;&#9;&#9;&#9;&#9;G01 X#&lt;draw_param_x&gt; Y#&lt;draw_param_y&gt; Z#&lt;draw_param_z&gt;&#10;&#10;&#9;&#9;&#9;O&lt;milldraw-exec-if&gt; ELSEIF [ #&lt;draw_param_g&gt; EQ  30 ] ; G0 XY&#10;&#9;&#9;&#9;&#9;G00 X#&lt;draw_param_x&gt; Y#&lt;draw_param_y&gt;&#10;&#9;&#9;&#9;O&lt;milldraw-exec-if&gt; ELSEIF [ #&lt;draw_param_g&gt; EQ  40 ] ; G0 Z&#10;&#9;&#9;&#9;&#9;G00 Z#&lt;draw_param_z&gt;&#10;&#9;&#9;&#9;O&lt;milldraw-exec-if&gt; ELSEIF [ #&lt;draw_param_g&gt; EQ  70 ] ; G0 XYZ&#10;&#9;&#9;&#9;&#9;G00 X#&lt;draw_param_x&gt; Y#&lt;draw_param_y&gt; Z#&lt;draw_param_z&gt;&#10;&#9;&#9;&#9;O&lt;milldraw-exec-if&gt; ELSEIF [ #&lt;draw_param_g&gt; EQ 215 ]&#10;&#9;&#9;&#9;&#9;G02 X#&lt;draw_param_x&gt; Y#&lt;draw_param_y&gt; I#&lt;draw_param_i&gt; J#&lt;draw_param_j&gt;&#10;&#9;&#9;&#9;O&lt;milldraw-exec-if&gt; ELSEIF [ #&lt;draw_param_g&gt; EQ 315 ]&#10;&#9;&#9;&#9;&#9;G03 X#&lt;draw_param_x&gt; Y#&lt;draw_param_y&gt; I#&lt;draw_param_i&gt; J#&lt;draw_param_j&gt;&#10;&#9;&#9;&#9;O&lt;milldraw-exec-if&gt; ELSEIF [ #&lt;draw_param_g&gt; EQ 231 ]&#10;&#9;&#9;&#9;&#9;G02 X#&lt;draw_param_x&gt; Y#&lt;draw_param_y&gt; I#&lt;draw_param_i&gt; J#&lt;draw_param_j&gt; Z#&lt;draw_param_z&gt;&#10;&#9;&#9;&#9;O&lt;milldraw-exec-if&gt; ELSEIF [ #&lt;draw_param_g&gt; EQ 331 ]&#10;&#9;&#9;&#9;&#9;G03 X#&lt;draw_param_x&gt; Y#&lt;draw_param_y&gt; I#&lt;draw_param_i&gt; J#&lt;draw_param_j&gt; Z#&lt;draw_param_z&gt;&#10;&#9;&#9;&#9;O&lt;milldraw-exec-if&gt; ENDIF&#10;&#10;&#9;&#9;O&lt;milldraw-exec-repeat&gt; ENDREPEAT&#10;&#9;&#9;;py,log(&quot;end draw&quot;)&#10;&#9;&#9;;py;log()&#10;&#9;O&lt;milldraw-exec&gt; ENDSUB&#10;&#10;( /Draw definitions )" path="1" before="&#10;#&lt;draw_tmp_x&gt; = [#param_x]&#10;#&lt;draw_tmp_y&gt; = [#param_y]&#10;#&lt;_draw_start_x&gt; = [#param_x]&#10;#&lt;_draw_start_y&gt; = [#param_y]&#10;;py,milldraw.draw_start(interpreter.this.params['draw_tmp_x'],interpreter.this.params['draw_tmp_y'])&#10;#&lt;_draw_x&gt; = [#param_x]&#10;#&lt;_draw_y&gt; = [#param_y]&#10;" type="Draw" order="['PARAM_X', 'PARAM_Y', 'PARAM_SURFACE', 'PARAM_DEPTH']" icon="icons/draw.png">
    <param tool_tip="X start" expanded="False" name="X" selected="False" value="#&lt;_x&gt;" call="#param_x" path="1:0" type="float" icon=""/>
    <param tool_tip="Y start" expanded="False" name="Y" selected="False" value="#&lt;_y&gt;" call="#param_y" path="1:1" type="float" icon=""/>
    <param tool_tip="Surface" expanded="False" name="Surface" selected="False" value="#&lt;_global_surface&gt;" call="#param_surface" path="1:2" type="float" icon="icons/surface.png"/>
    <param tool_tip="Depth" expanded="False" name="Depth" selected="False" value="#&lt;_global_depth&gt;" call="#param_depth" path="1:3" type="float" icon="icons/depth.png"/>
    <param tool_tip="Drop Draw items here" expanded="True" name="Items" selected="False" call="#param_items" path="1:4" type="items" icon="icons/items.png">
      <feature src="mill/draw/arc-xyr-rel.ini" expanded="True" help="&lt;big&gt;Arc to&lt;/big&gt;&#10;Params:&#10;&#9;X,Y - relative coordinates of the end&#10;&#9;R - radius of the arc&#10;" icon="icons/arc-to-xyr.png" image="images/arc-to-xyr.png" after="" order="['PARAM_G', 'PARAM_X', 'PARAM_Y', 'PARAM_R', 'PARAM_IN_OUT']" call="&#10;#&lt;draw_tmp_g&gt; = [#param_g]&#10;#&lt;draw_tmp_x&gt; = [[#param_x]+#&lt;_draw_x&gt;]&#10;#&lt;draw_tmp_y&gt; = [[#param_y]+#&lt;_draw_y&gt;]&#10;#&lt;draw_tmp_r&gt; = [#param_r]&#10;#&lt;draw_tmp_in_out&gt; = [#param_in_out]&#10;;py,milldraw.arc_to_xyr(interpreter.this.params['draw_tmp_g'],interpreter.this.params['draw_tmp_x'],interpreter.this.params['draw_tmp_y'],interpreter.this.params['draw_tmp_r'],interpreter.this.params['draw_tmp_in_out'])&#10;#&lt;_draw_x&gt; = [[#param_x]+#&lt;_draw_x&gt;]&#10;#&lt;_draw_y&gt; = [[#param_y]+#&lt;_draw_y&gt;]&#10;" selected="False" path="1:4:0" definitions="" before="&#10;" type="Arc to by XYR" id="Arc-to-by-XYR-0002" name="Arc to by XYR 0002">
        <param tool_tip="Enter 2 for CW arc, 3 for CCW arc" expanded="False" name="CW/CCW (G2|G3)" selected="False" value="2" call="#param_g" path="1:4:0:0" type="float" icon="icons/arc-cw-ccw.png"/>
        <param tool_tip="X" expanded="False" name="X" selected="False" value="10" call="#param_x" path="1:4:0:1" type="float" icon="icons/x.png"/>
        <param tool_tip="Y" expanded="False" name="Y" selected="False" value="10" call="#param_y" path="1:4:0:2" type="float" icon="icons/y.png"/>
        <param tool_tip="Arc radius" expanded="False" name="Radius" selected="False" value="10" call="#param_r" path="1:4:0:3" type="float" icon="icons/r.png"/>
        <param tool_tip="Create arc less than 180 degree (0) or greater than 180 degree (0)" expanded="False" name="In or Out" selected="False" value="1" call="#param_in_out" path="1:4:0:4" type="float" icon="icons/arc-in-out.png"/>
      </feature>
      <feature src="mill/draw/arc-xyr-rel.ini" expanded="True" help="&lt;big&gt;Arc to&lt;/big&gt;&#10;Params:&#10;&#9;X,Y - relative coordinates of the end&#10;&#9;R - radius of the arc&#10;" icon="icons/arc-to-xyr.png" image="images/arc-to-xyr.png" after="" order="['PARAM_G', 'PARAM_X', 'PARAM_Y', 'PARAM_R', 'PARAM_IN_OUT']" call="&#10;#&lt;draw_tmp_g&gt; = [#param_g]&#10;#&lt;draw_tmp_x&gt; = [[#param_x]+#&lt;_draw_x&gt;]&#10;#&lt;draw_tmp_y&gt; = [[#param_y]+#&lt;_draw_y&gt;]&#10;#&lt;draw_tmp_r&gt; = [#param_r]&#10;#&lt;draw_tmp_in_out&gt; = [#param_in_out]&#10;;py,milldraw.arc_to_xyr(interpreter.this.params['draw_tmp_g'],interpreter.this.params['draw_tmp_x'],interpreter.this.params['draw_tmp_y'],interpreter.this.params['draw_tmp_r'],interpreter.this.params['draw_tmp_in_out'])&#10;#&lt;_draw_x&gt; = [[#param_x]+#&lt;_draw_x&gt;]&#10;#&lt;_draw_y&gt; = [[#param_y]+#&lt;_draw_y&gt;]&#10;" selected="False" path="1:4:1" definitions="" before="&#10;" type="Arc to by XYR" id="Arc-to-by-XYR-0002" name="Arc to by XYR 0002">
        <param tool_tip="Enter 2 for CW arc, 3 for CCW arc" expanded="False" name="CW/CCW (G2|G3)" selected="False" value="2" call="#param_g" path="1:4:1:0" type="float" icon="icons/arc-cw-ccw.png"/>
        <param tool_tip="X" expanded="False" name="X" selected="False" value="0" call="#param_x" path="1:4:1:1" type="float" icon="icons/x.png"/>
        <param tool_tip="Y" expanded="False" name="Y" selected="False" value="10" call="#param_y" path="1:4:1:2" type="float" icon="icons/y.png"/>
        <param tool_tip="Arc radius" expanded="False" name="Radius" selected="False" value="10" call="#param_r" path="1:4:1:3" type="float" icon="icons/r.png"/>
        <param tool_tip="Create arc less than 180 degree (0) or greater than 180 degree (0)" expanded="False" name="In or Out" selected="False" value="0" call="#param_in_out" path="1:4:1:4" type="float" icon="icons/arc-in-out.png"/>
      </feature>
      <feature src="mill/draw/arc-xyr-rel.ini" expanded="True" help="&lt;big&gt;Arc to&lt;/big&gt;&#10;Params:&#10;&#9;X,Y - relative coordinates of the end&#10;&#9;R - radius of the arc&#10;" icon="icons/arc-to-xyr.png" image="images/arc-to-xyr.png" after="" order="['PARAM_G', 'PARAM_X', 'PARAM_Y', 'PARAM_R', 'PARAM_IN_OUT']" call="&#10;#&lt;draw_tmp_g&gt; = [#param_g]&#10;#&lt;draw_tmp_x&gt; = [[#param_x]+#&lt;_draw_x&gt;]&#10;#&lt;draw_tmp_y&gt; = [[#param_y]+#&lt;_draw_y&gt;]&#10;#&lt;draw_tmp_r&gt; = [#param_r]&#10;#&lt;draw_tmp_in_out&gt; = [#param_in_out]&#10;;py,milldraw.arc_to_xyr(interpreter.this.params['draw_tmp_g'],interpreter.this.params['draw_tmp_x'],interpreter.this.params['draw_tmp_y'],interpreter.this.params['draw_tmp_r'],interpreter.this.params['draw_tmp_in_out'])&#10;#&lt;_draw_x&gt; = [[#param_x]+#&lt;_draw_x&gt;]&#10;#&lt;_draw_y&gt; = [[#param_y]+#&lt;_draw_y&gt;]&#10;" selected="False" path="1:4:2" definitions="" before="&#10;" type="Arc to by XYR" id="Arc-to-by-XYR-0002" name="Arc to by XYR 0002">
        <param tool_tip="Enter 2 for CW arc, 3 for CCW arc" expanded="False" name="CW/CCW (G2|G3)" selected="False" value="2" call="#param_g" path="1:4:2:0" type="float" icon="icons/arc-cw-ccw.png"/>
        <param tool_tip="X" expanded="False" name="X" selected="False" value="-10" call="#param_x" path="1:4:2:1" type="float" icon="icons/x.png"/>
        <param tool_tip="Y" expanded="False" name="Y" selected="False" value="-20" call="#param_y" path="1:4:2:2" type="float" icon="icons/y.png"/>
        <param tool_tip="Arc radius" expanded="False" name="Radius" selected="True" value="20" call="#param_r" path="1:4:2:3" type="float" icon="icons/r.png"/>
        <param tool_tip="Create arc less than 180 degree (0) or greater than 180 degree (0)" expanded="False" name="In or Out" selected="False" value="1" call="#param_in_out" path="1:4:2:4" type="float" icon="icons/arc-in-out.png"/>
      </feature>
    </param>
  </feature>
</LinuxCNC-Features>
